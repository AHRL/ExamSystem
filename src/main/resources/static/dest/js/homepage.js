"use strict";function pageReady(){var t=$("#avator");$.ajax({type:"GET",url:"http://127.0.0.1:3000/api/userinfo",dataType:"json",success:function(a){(a=JSON.parse(a)).name?t.text(a.name):t.text("游客")}}),$("#logout").on("click",function(){$.ajax({type:"GET",url:"http://127.0.0.1:3000/api/logout"})});var n=$("#examListForSign"),d=$(n[0].firstElementChild);function s(t){var a=$("<h4>").addClass("card-title").text(t.name),e=[$("<p>").addClass("card-text").text("考试时间："+t.date),$("<p>").addClass("card-text").text("报名截止："+t.deadline),$("<p>").addClass("card-text").text("考试地点："+t.loc)],d=$("<button>").addClass("btn btn-sm btn-primary").attr("type","button").text("点击报名");d.on("click",function(a){a.preventDefault(),$.ajax({type:"POST",url:"http://127.0.0.1:3000/api/user-sign-for-exam",data:JSON.stringify({id:t.id}),dataType:"json",contentType:"application/json",success:function(a){(a=JSON.parse(a)).isSuccess&&d.addClass("disabled").attr("disabled","disabled").text("已报名")}})});var s=$("<div>").addClass("card-body");s.append(a).append(e[0]).append(e[1]).append(e[2]).append(d),n.append($("<div>").addClass("col-4").append($("<div>").addClass("card").width("100%").append(s)))}$.ajax({type:"GET",url:"http://127.0.0.1:3000/api/exam-list-for-sign",dataType:"json",success:function(a){if(a){a=JSON.parse(a),d.text("");for(var t=a.length,e=0;e<t;e++)s(a[e])}else d.text("暂无考试")},error:function(a){console.error(a)}})}$(document).ready(pageReady);