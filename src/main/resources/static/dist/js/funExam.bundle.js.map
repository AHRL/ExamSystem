{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resource/js/funExam.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","13","t","e","3","a","$","document","ready","ajaxSetup","timeout","[object Object]","this","$avator","$logout","$examListForSign","$noExam","find","getUser","getExamList","logout","then","data","username","JSON","parse","ret","text","fail","err","res","len","length","createCard","on","$title","addClass","textArr","date","deadline","loc","$btn","attr","preventDefault","post","stringify","status","$bd","append","width","init"],"mappings":"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","file":"./js/funExam.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import '../scss/main.scss'\r\n\r\nclass Home {\r\n    constructor() {\r\n        this.$avator = $('#avator');\r\n        this.$logout = $('#logout');\r\n        this.$examListForSign = $('#examListForSign');\r\n        this.$noExam = this.$examListForSign.find('.no-exam');\r\n    }\r\n\r\n    init() {\r\n        this.getUser();\r\n        this.getExamList();\r\n        this.logout();\r\n    }\r\n\r\n    getUser() {\r\n        $.get('/api/userinfo')\r\n            .then(data => {\r\n                data = JSON.parse(data);\r\n                const username = data.data.username;\r\n                if (data.ret && username) {\r\n                    this.$avator.text(username);\r\n                } else {\r\n                    this.$avator.text('游客');\r\n                }\r\n            })\r\n            .fail(err => {\r\n                this.$avator.text('游客');\r\n            });\r\n    }\r\n\r\n    getExamList() {\r\n        $.get('/api/exam_list_for_sign')\r\n            .then(data => {\r\n                data = JSON.parse(data);\r\n                const res = data.data;\r\n                if (data.ret && res) {\r\n                    this.$noExam.text('');\r\n                    const len = res.length;\r\n                    for (let i = 0; i < len; i++) {\r\n                        this.createCard(res[i]);\r\n                    }\r\n                } else {\r\n                    this.$noExam.text('暂无考试');\r\n                }\r\n            })\r\n            .fail(err => {\r\n                this.$noExam.text('暂无考试');\r\n            });\r\n    }\r\n\r\n    logout() {\r\n        this.$logout.on('click', () => {\r\n            // TODO\r\n            $.get('/api/logout')\r\n                .then(data => {\r\n    \r\n                })\r\n                .fail(err => {\r\n    \r\n                });\r\n        });\r\n    }\r\n\r\n    createCard(data) {\r\n        let $title = $('<h4>').addClass('card-title').text(data.name);\r\n        let textArr = [\r\n            $('<p>').addClass('card-text').text('考试时间：' + data.date),\r\n            $('<p>').addClass('card-text').text('报名截止：' + data.deadline),\r\n            $('<p>').addClass('card-text').text('考试地点：' + data.loc)\r\n        ];\r\n        let $btn = $('<button>').addClass('btn btn-sm btn-primary').attr('type', 'button').text('点击报名');\r\n        $btn.on('click', e => {\r\n            e.preventDefault();\r\n            $.post('/api/user_sign_for_exam', JSON.stringify({\r\n                // TODO\r\n            })).then(data => {\r\n                data = JSON.parse(data);\r\n                const res = data.data;\r\n                if (data.ret && res.status === 'OK') {\r\n                    $btn.addClass('disabled')\r\n                    .attr('disabled', 'disabled')\r\n                    .text('已报名');\r\n                }\r\n            })\r\n        });\r\n        let $bd = $('<div>').addClass('card-body');\r\n        $bd.append($title).append(textArr[0]).append(textArr[1]).append(textArr[2]).append($btn);\r\n        this.$examListForSign.append(\r\n            $('<div>').addClass('col-4').append(\r\n                $('<div>').addClass('card').width('100%').append($bd)\r\n            )\r\n        );\r\n    }\r\n}\r\n\r\n$(document).ready(function() {\r\n    $.ajaxSetup({\r\n        timeout: 2000\r\n    });\r\n\r\n    const home = new Home();\r\n    home.init();\r\n});\r\n\r\n"],"sourceRoot":""}