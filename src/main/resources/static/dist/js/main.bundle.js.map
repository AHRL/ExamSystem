{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resource/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","2","e","$","document","ready","$emailIn","$pswdIn","$submitIn","on","checkValue","matchEmail","rmValidationClass","matchLength","preventDefault","$emailUp","$nameUp","$pswdUp","$valCode","$getValCodeBtn","$submitUp","email","val","ajax","type","url","server","data","JSON","stringify","dataType","contentType","success","console","log","error","err","isNotEmptyForm","matchPswd","parse","valCode","this","addClass","jqObj","beginCB","endCB","Function","countingDown","obj","count","callback","text","timer","setTimeout","clearTimeout","removeClass","removeAttr","attr","hasClass","pswd","REG","nextElementSibling","css","display","matchFunc","split","every","item","test","minLen","maxLen","length"],"mappings":"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","file":"./js/main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","$(document).ready(pageReady);\r\n\r\n// DOM 无关的全局变量\r\n\r\n// RegExp\r\nvar REG = {\r\n    email: /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n    pswd: /^[a-zA-Z0-9!@#$%^&*]{6,16}$/,\r\n};\r\n\r\nvar server = '';\r\n\r\nfunction pageReady() {\r\n    // Page Login ------------------------\r\n    // Sign in\r\n    var $emailIn = $('#emailIn'),\r\n        $pswdIn = $('#pswdIn'),\r\n        $submitIn = $('#submitIn');\r\n\r\n    var $formIn = $('#formIn');\r\n\r\n    $emailIn.on('blur', checkValue(matchEmail));\r\n    $emailIn.on('focus', rmValidationClass);\r\n    $pswdIn.on('blur', checkValue(matchLength));\r\n    $pswdIn.on('focus', rmValidationClass);\r\n    $submitIn.on('click', function(e) {\r\n        e.preventDefault();\r\n        // /* $.ajax({\r\n        //     type: 'POST',\r\n        //     url: server + '/login',\r\n        //     data: JSON.stringify({\r\n        //         email: $emailIn.val(),\r\n        //         pswd: $pswdIn.val()\r\n        //     }),\r\n        //     // dataType: '', // 我期望得到的数据类型\r\n        //     contentType: 'application/json', // 我准备以该数据类型发送数据\r\n        //     success: function(data) {\r\n        //         console.log(data);\r\n        //     },\r\n        //     error: function(err) {\r\n        //         console.error(err);\r\n        //     }\r\n        // }); */\r\n    });\r\n\r\n    // $formIn.on('submit', function(e) {\r\n    //     e.preventDefault();\r\n    //     $.ajax({\r\n    //         type: 'POST',\r\n    //         url: '/login',\r\n    //         contentType: 'application/x-www-form-urlencoded',\r\n    //         data: $formIn.serialize(),\r\n    //         success: function(data) {\r\n    //             console.log(data);\r\n    //         },\r\n    //         error: function(err) {\r\n    //             console.error(err);\r\n    //         }\r\n    //     })\r\n    // });\r\n\r\n    // Sign up\r\n    var $emailUp = $('#emailUp'),\r\n        $nameUp = $('#nameUp'),\r\n        $pswdUp = $('#pswdUp'),\r\n        $enPswdUp = $('#enPwsdUp'),\r\n        $valCode = $('#valCode'),\r\n        $getValCodeBtn = $('#sendValCode'),\r\n        $submitUp = $('#submitUp');\r\n\r\n    $emailUp.on('blur', function() {\r\n        var email = $emailUp.val();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: server + '/v2/user?email=' + email,\r\n            data: JSON.stringify({\r\n                email: email\r\n            }),\r\n            dataType: 'json',\r\n            contentType: 'application/json',\r\n            success: function(data) {\r\n                console.log(data);\r\n            },\r\n            error: function(err) {\r\n                console.error(err);\r\n            }\r\n        })\r\n    });\r\n    $emailUp.on('focus', rmValidationClass);\r\n    $nameUp.on('blur', checkValue(isNotEmptyForm))\r\n    $nameUp.on('focus', rmValidationClass);\r\n    $pswdUp.on('blur', checkValue(matchPswd));\r\n\r\n    $getValCodeBtn.on('click', function(e) {\r\n        e.preventDefault();\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: server + '/api/getValCode',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                console.log(data);\r\n                data = JSON.parse(data).valCode;\r\n                $valCode.on('blur', function() {\r\n                    var val = $valCode.val();\r\n                    if (data === val) {\r\n                        $(this).addClass('is-valid');\r\n                    } else {\r\n                        $(this).addClass('is-invalid');\r\n                    }\r\n                });\r\n                dealEmailCountingDown($getValCodeBtn, function(obj) {\r\n                    obj.addClass('disabled').attr('disabled', 'true');\r\n                }, function(obj) {\r\n                    obj.removeClass('disabled').removeAttr('disabled');\r\n                });\r\n                $valCode.on('focus', function() {\r\n                    if ($valCode.hasClass('.is-valid')) {\r\n                        $valCode.removeClass('.is-valid');\r\n                    }\r\n                    if ($valCode.hasClass('is-invalid')) {\r\n                        $valCode.removeClass('.is-invalid');\r\n                    }\r\n                });\r\n            },\r\n            error: function(err) {\r\n                console.error(err);\r\n            }\r\n        })\r\n    });\r\n    $submitUp.on('click', function(e) {\r\n        e.preventDefault();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: server + '/api/signup',\r\n            data: JSON.stringify({\r\n                email: $emailUp.val(),\r\n                name: $nameUp.val(),\r\n                pswd: $pswdUp.val()\r\n            }),\r\n            dataType: 'json', // 我期望得到的数据类型\r\n            contentType: 'application/json', // 我准备以该数据类型发送数据\r\n            success: function(data) {\r\n                console.log(data);\r\n            },\r\n            error: function(err) {\r\n                console.error(err);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Func rmValidationClass\r\n * \r\n * Remove validation class\r\n * \r\n */\r\nfunction rmValidationClass() {\r\n    if ($(this).hasClass('.is-valid')) {\r\n        $(this).removeClass('.is-valid');\r\n    }\r\n    if ($(this).hasClass('is-invalid')) {\r\n        $(this).removeClass('.is-invalid');\r\n        $(this.nextElementSibling).css({\r\n            \"display\": \"none\"\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Func addValidationClass\r\n * \r\n * Add validation class\r\n * \r\n * @param {Boolean} flag \r\n */\r\nfunction addValidationClass(flag) {\r\n\r\n}\r\n\r\n/**\r\n * Func checkValue\r\n * \r\n * @param {Function} matchFunc \r\n * @returns {Function}\r\n */\r\nfunction checkValue(matchFunc) {\r\n    return function() {\r\n        var val = $(this).val();\r\n        var isMatch = matchFunc(val);\r\n        if (isMatch) {\r\n            $(this).addClass('is-valid');\r\n        } else {\r\n            $(this).addClass('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Func matchEmail\r\n * \r\n * Match e-mail\r\n * \r\n * @param {String} value \r\n * @returns {Boolean}\r\n */\r\nfunction matchEmail(value) {\r\n    return value.split(/\\s*, \\s*/g).every(function(item) {\r\n        return REG.email.test(item);\r\n    });\r\n}\r\n\r\n/**\r\n * Func matchLength\r\n * \r\n * @param {String} value \r\n * @param {Int} minLen \r\n * @param {Int} maxLen \r\n * @returns {Boolean}\r\n */\r\nfunction matchLength(value, minLen, maxLen) {\r\n    minLen = minLen || 6;\r\n    maxLen = maxLen || 16;\r\n    if (value.length >= minLen && value.length <= maxLen) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Func isEmptyForm\r\n * \r\n * @param {String} value \r\n * @returns {Boolean}\r\n */\r\nfunction isNotEmptyForm(value) {\r\n    return value.length !== 0 ? true : false;\r\n}\r\n\r\n/**\r\n * Func matchPswd\r\n * \r\n * @param {String} value \r\n * @returns {Boolean}\r\n */\r\nfunction matchPswd(value) {\r\n    return REG.pswd.test(value);\r\n}\r\n\r\n/**\r\n * dealEmailCountingDown\r\n * \r\n * @param {Object} jqObj \r\n * @param {Function} beginCB \r\n * @param {Function} endCB \r\n */\r\nfunction dealEmailCountingDown(jqObj, beginCB, endCB) {\r\n    jqObj = (jqObj instanceof $) ? jqObj : $(jqObj);\r\n    if (beginCB && beginCB instanceof Function) {\r\n        beginCB(jqObj);\r\n    }\r\n    countingDown(jqObj, 60, endCB)();\r\n}\r\n\r\n/**\r\n * Func countingDown\r\n * \r\n * @param {Object} obj \r\n * @param {Number} count \r\n * @param {Function} callback \r\n * @returns {Function}\r\n */\r\nfunction countingDown(obj, count, callback) {\r\n    return function() {\r\n        count -= 1;\r\n        $(obj).text(count + '秒后重新获取验证码');\r\n        var timer = null;\r\n        if (count !== 0) {\r\n            timer = setTimeout(countingDown($(obj), count, callback), 1000);\r\n        } else {\r\n            clearTimeout(timer);\r\n            $(obj).text('获取邮箱验证码');\r\n            if (callback && callback instanceof Function) {\r\n                callback(obj);\r\n            }\r\n        }\r\n    }\r\n}"],"sourceRoot":""}