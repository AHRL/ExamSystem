{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resource/js/homepage.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","$","document","ready","$avator","ajax","type","url","server","dataType","success","data","JSON","parse","text","on","error","err","console","$examListForSign","$firstChild","firstElementChild","createCard","$title","addClass","textArr","date","deadline","loc","$btn","attr","preventDefault","stringify","id","contentType","isSuccess","$bd","append","width","len","length"],"mappings":"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","file":"./js/homepage.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","$(document).ready(pageReady);\r\n\r\nvar server = 'http://127.0.0.1:3000';\r\n\r\nfunction pageReady() {\r\n    // Page home ---------------------------\r\n    var $avator = $('#avator');\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: server + '/api/userinfo',\r\n        dataType: 'json',\r\n        success: function(data) {\r\n            data = JSON.parse(data);\r\n            if (data.name) {\r\n                $avator.text(data.name);\r\n            } else {\r\n                $avator.text('游客');\r\n            }\r\n        }\r\n    });\r\n\r\n    var $logout = $('#logout');\r\n    $logout.on('click', function() {\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: server + '/logout',\r\n            success: function(data) {\r\n\r\n            },\r\n            error: function(err) {\r\n                console.error(err);\r\n            }\r\n        });\r\n    });\r\n\r\n    var $examListForSign = $('#examListForSign');\r\n    var $firstChild = $($examListForSign[0].firstElementChild);\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: server + '/api/exam-list-for-sign',\r\n        dataType: 'json',\r\n        success: function(data) {\r\n            if (data) {\r\n                data = JSON.parse(data); // 期望 JSON 数组\r\n                $firstChild.text('');\r\n                var len = data.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    createCard(data[i]);\r\n                }\r\n\r\n            } else {\r\n                $firstChild.text('暂无考试');\r\n            }\r\n        },\r\n        error: function(err) {\r\n            console.error(err);\r\n        }\r\n    });\r\n\r\n    function createCard(data) {\r\n        var $title = $('<h4>').addClass('card-title').text(data.name);\r\n        var textArr = [\r\n            $('<p>').addClass('card-text').text('考试时间：' + data.date),\r\n            $('<p>').addClass('card-text').text('报名截止：' + data.deadline),\r\n            $('<p>').addClass('card-text').text('考试地点：' + data.loc)\r\n        ];\r\n        var $btn = $('<button>').addClass('btn btn-sm btn-primary').attr('type', 'button').text('点击报名');\r\n        $btn.on('click', function(e) {\r\n            e.preventDefault();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: server + '/api/user-sign-for-exam',\r\n                data: JSON.stringify({\r\n                    \"id\": data.id\r\n                }),\r\n                dataType: 'json',\r\n                contentType: 'application/json',\r\n                success: function(data) {\r\n                    data = JSON.parse(data);\r\n                    if (data.isSuccess) {\r\n                        $btn.addClass('disabled').attr('disabled', 'disabled').text('已报名');\r\n                    } else {\r\n                        // 报名失败\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        var $bd = $('<div>').addClass('card-body');\r\n        $bd.append($title).append(textArr[0]).append(textArr[1]).append(textArr[2]).append($btn);\r\n        $examListForSign.append(\r\n            $('<div>').addClass('col-4').append(\r\n                $('<div>').addClass('card').width('100%').append($bd)\r\n            )\r\n        );\r\n    }\r\n}"],"sourceRoot":""}