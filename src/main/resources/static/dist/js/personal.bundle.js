!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}({6:function(e,t){$(document).ready(function(){const e=$("#avator");function t(e){let t=$("<h4>").addClass("card-title").text(e.name),a=[$("<p>").addClass("card-text").text("考试时间："+e.date),$("<p>").addClass("card-text").text("报名截止："+e.deadline),$("<p>").addClass("card-text").text("考试地点："+e.location)],r=$("<button>").addClass("btn btn-sm btn-primary").attr("type","button").text("开始考试");r.on("click",e=>{$.get("/api/ready_exam").then(e=>{const t=(e=JSON.parse(e)).data;e.ret&&"OK"===t.status?location.assign("/exam"):alert("还没到考试时间")})});let n=$("<div>").addClass("card-body");n.append(t).append(a[0]).append(a[1]).append(a[2]).append(r),$("#examingDetail").append($("<div>").addClass("col-4").append($("<div>").addClass("card").width("100%").append(n)))}function a(e){let t=[$("<td>").attr("scope","row").text(e.date),$("<td>").text(e.name),$("<td>").text(e.score)];$(".no-examedDetail").hide();let a=$("<tr>");for(let e=0;e<3;e++)a.append(t[e]);$("#examedDetail").append(a)}$.get("/api/userinfo").then(t=>{const a=(t=JSON.parse(t)).data;t.ret&&a&&(e.text(a.username),$("#avator-title").text(`${a.username}，您好！`),$("#trueName").val(a.username),!0===a.isAdmin&&$("#isAdmin").show())}).fail(e=>{console.error(e)}),$.get("/api/exam_detail").then(e=>{const r=(e=JSON.parse(e)).data;if(e.ret&&r){let e=r.examing.length;0===e&&$("#examingDetail").text("您没有报名考试");for(let a=0;a<e;a++)t(r.examing[a]);let n=r.examed.length;0===n&&$(".no-examedDetail").show();for(let e=0;e<n;e++)a(r.examed[e])}});const r=$(".list-group"),n=$(".listBox");r.on("click",e=>{let t=$(e.target).index();r.children().toArray().forEach((e,a)=>{$(e).hasClass("active")&&$(e).removeClass("active"),t===a&&$(e).addClass("active")}),n.toArray().forEach((e,a)=>{$(e).hide(),t===a&&$(e).show()})});const o=$(".tabGroup1"),l=$(".tabCon1");o.on("click",e=>{let t=$(e.target).index(".tabGroup1 .nav-link");o.children().toArray().map(e=>$(e).children()).forEach((e,a)=>{$(e).hasClass("active")&&$(e).removeClass("active"),t===a&&$(e).addClass("active")}),l.toArray().forEach((e,a)=>{$(e).hide(),t===a&&$(e).show()})});const d=$(".tabGroup2"),i=$(".tabCon2");d.on("click",e=>{let t=$(e.target).index(".tabGroup2 .nav-link");d.children().toArray().map(e=>$(e).children()).forEach((e,a)=>{$(e).hasClass("active")&&$(e).removeClass("active"),t===a&&$(e).addClass("active")}),i.toArray().forEach((e,a)=>{$(e).hide(),t===a&&$(e).show()})});const s=$(".btn-modify"),c=$(".btn-ensure"),p=$("#trueName"),u=$(".modify-major"),f=$(".modify-grade"),m=$(".modify-other");s.on("click",e=>{e.preventDefault(),alert("你将修改资料"),p.removeAttr("disabled"),u.removeAttr("disabled"),f.removeAttr("disabled"),m.removeAttr("disabled"),s.hide(),c.show()}),c.on("click",e=>{e.preventDefault(),$.post("/api/modify",JSON.stringify({username:p.val(),major:u.val(),grade:f.val(),other:m.val()})).then(e=>{(e=JSON.parse(e)).success&&(alert("完成修改资料"),p.attr("disabled",!0),u.attr("disabled",!0),f.attr("disabled",!0),m.attr("disabled",!0),s.show(),c.hide())}).catch(e=>{console.error(e)})});const v=$("#originalpswd"),h=$("#newpswd"),b=$("#ensurepswd");let x=!1;const g=$(".modify-password");v.blur(e=>{$.post("/api/varifyPswd",JSON.stringify({password:v.val()})).then(e=>{(e=JSON.parse(e)).success||alert("密码不正确")}).catch(e=>{})}),b.blur(e=>{const t=h.val();t&&(t!==b.val()&&alert("密码不一致"),x=!0)}),g.click(e=>{e.preventDefault(),x?$.post("/api/savePswd",JSON.stringify({password:b.val()})).then(e=>{(e=JSON.parse(e)).success&&(alert("密码修改成功"),v.val(""),h.val(""),b.val(""))}):alert("密码不一致")}),$("#logout").on("click",()=>{$.get("/api/logout").then(e=>{alert("您已退出登录"),location.assign("/login")}).fail(e=>{})});const y=$("#gradeInfo")(function(){let e=document.createDocumentFragment();e.appendChild($("<option>").text("年级").attr("selected",!0));let t=Date.getFullYear();for(let a=t;a>t-4;a--){let t=$("<option>").val(a).text(a);e.appendChild(t)}y.append(e)}())})}});
//# sourceMappingURL=personal.bundle.js.map