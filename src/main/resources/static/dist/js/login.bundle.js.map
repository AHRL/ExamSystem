{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resource/js/login.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","7","e","$","document","ready","[object Object]","this","regx","email","pswd","$formIn","$emailIn","$pswdIn","$submitIn","$logIn","$formUp","$emailUp","$nameUp","$pswdUp","$enPswdUp","$valCode","$getValCodeBtn","$submitUp","$logUp","flag","enPswd","valCode","submitIn","checkEmailUp","checkNameUp","checkPswdUp","checkEnPswdUp","getValCode","submitUp","on","val","result","check","then","data","res","JSON","parse","ret","isExist","fadeIn","fail","err","console","error","submit","fadeUp","preventDefault","post","dealEmailCountingDown","context","addClass","attr","removeClass","removeAttr","log","jqObj","beginCB","endCB","Function","countingDown","obj","count","callback","self","text","timer","setTimeout","clearTimeout","content","fadeOut","type","split","every","item","test","length","init"],"mappings":"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","file":"./js/login.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","class Login {\r\n    constructor() {\r\n        this.regx = {\r\n            email: /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n            pswd: /^[a-zA-Z0-9!@#$%^&*]{6,16}$/,\r\n        };\r\n        this.$formIn = $('formIn');\r\n        this.$emailIn = $('emailIn');\r\n        this.$pswdIn = $('pswdIn');\r\n        this.$submitIn = $('#submitIn');\r\n        this.$logIn = $('#loginIn');\r\n\r\n        this.$formUp = $('formUp');\r\n        this.$emailUp = $('#emailUp'),\r\n        this.$nameUp = $('#nameUp'),\r\n        this.$pswdUp = $('#pswdUp'),\r\n        this.$enPswdUp = $('#enPwsdUp'),\r\n        this.$valCode = $('#valCode'),\r\n        this.$getValCodeBtn = $('#sendValCode'),\r\n        this.$submitUp = $('#submitUp');\r\n        this.$logUp = $('#logUp');\r\n\r\n        this.flag = {\r\n            email: false,\r\n            name: false,\r\n            pswd: false,\r\n            enPswd: false,\r\n            valCode: false\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.submitIn();\r\n        this.checkEmailUp();\r\n        this.checkNameUp();\r\n        this.checkPswdUp();\r\n        this.checkEnPswdUp();\r\n        this.getValCode();\r\n        this.submitUp();\r\n    }\r\n\r\n    checkEmailIn() {\r\n        this.$emailIn.on('blur', e => {\r\n            const val = this.$emailIn.val();\r\n            let result;\r\n            if (val) {\r\n                result = this.check('email', val);\r\n                if (result) {\r\n                    $.get('/api/isEmailExist')\r\n                    .then(data => {\r\n                        data = JSON.parse(data);\r\n                        const res = data.data;\r\n                        if (data.ret && res) {\r\n                            if (res.isExist === false) {\r\n                                this.fadeIn('该用户未被注册');\r\n                                this.flag.email = false;\r\n                            }\r\n                        } else {\r\n                            this.flag.email = true;\r\n                        }\r\n                    })\r\n                    .fail(err => {\r\n                        console.error(err);\r\n                    });\r\n                } else {\r\n                    this.fadeIn('用户名不正确');\r\n                    this.flag.email = false;\r\n                }     \r\n            }\r\n        })\r\n    }\r\n\r\n    checkPswdIn() {\r\n        this.$pswdIn.on('blur', e => {\r\n            const val = this.$pswdIn.val();\r\n            let result;\r\n            if (val) {\r\n                result = this.check('pswd', val);\r\n                if (!result) {\r\n                    this.fadeIn('密码不符合要求');\r\n                    this.flag.pswd = false;\r\n                } else {\r\n                    this.flag.pswd = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    submitIn() {\r\n        this.$submitIn.on('click', e => {\r\n            this.$formIn.submit();\r\n        });\r\n    }\r\n\r\n    checkEmailUp() {\r\n        this.$emailUp.on('blur', e => {\r\n            const val = this.$emailUp.val();\r\n            let result;\r\n            if (val) {\r\n                result = this.check('email', val);\r\n                if (result) {\r\n                    $.get('/api/isEmailExist', `email=${val}`)\r\n                    .then(data => {\r\n                        data = JSON.parse(data)\r\n                        if (data.ret === true) {\r\n                            this.flag.email = true;\r\n                        } else {\r\n                            this.fadeUp('邮箱已被注册');\r\n                            this.flag.email = false;\r\n                        }\r\n                    })\r\n                    .fail(err => {\r\n                        console.error(err);\r\n                    });\r\n                } else {\r\n                    this.fadeUp('邮箱格式不正确');\r\n                    this.flag.email = false;\r\n                }     \r\n            }     \r\n        });\r\n    }\r\n\r\n    checkNameUp() {\r\n       this.$nameUp.on('blur', e => {\r\n           const val = this.$nameUp.val();\r\n           let result;\r\n           if (val) {\r\n                result = this.check('name', val);\r\n                if (result) {\r\n                    $.get('/api/isUsernameExist', `username=${val}`)\r\n                    .then(data => {\r\n                        data = JSON.parse(data)\r\n                        if (data.ret === true) {\r\n                            this.flag.name = true\r\n                        } else {\r\n                            this.fadeUp('用户名已被注册');\r\n                            this.flag.name = false;\r\n                        }\r\n                    })\r\n                    .fail(err => {\r\n                        console.error(err)\r\n                    })\r\n                    \r\n                } else {\r\n                    this.fadeUp('姓名不符合要求')\r\n                    this.flag.name = false\r\n                }\r\n           }\r\n       });\r\n    }\r\n\r\n    checkPswdUp() {\r\n        this.$pswdUp.on('blur', e => {\r\n            const val = this.$pswdUp.val();\r\n            let result;\r\n            if (val) {\r\n                result = this.check('pswd', val);\r\n                if (!result) {\r\n                    this.fadeUp('密码不符合要求');\r\n                    this.flag.pswd = false;\r\n                } else {\r\n                    this.flag.pswd = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    checkEnPswdUp() {\r\n        this.$enPswdUp.on('blur', e => {\r\n            const val = this.$enPswdUp.val();\r\n            if (this.$pswdUp.val() !== val) {\r\n                this.fadeUp('两次密码不一致');\r\n                this.flag.enPswd = false;\r\n            } else {\r\n                this.flag.enPswd = true;\r\n            }\r\n        })\r\n    }\r\n    \r\n    getValCode() {\r\n        this.$getValCodeBtn.on('click', e => {\r\n            e.preventDefault();\r\n            const val = this.$emailUp.val();\r\n            $.post('/api/getValCode', `email=${val}`)\r\n                .then(data => {\r\n                    data = JSON.parse(data);\r\n                    const res = data.data;\r\n                    if (data.ret && res) {\r\n                        this.$valCode.on('blur', e => {\r\n                            const val = this.$valCode.val();\r\n                            if (val !== res.valCode) {\r\n                                this.fadeUp('验证码不正确');\r\n                                this.flag.valCode = false;\r\n                            } else {\r\n                                this.flag.valCode = true;\r\n                            }\r\n                        });\r\n                        this.dealEmailCountingDown(this.$getValCodeBtn, function(context) {\r\n                            context.addClass('disabled').attr('disabled', 'true');\r\n                        }, function(context) {\r\n                            context.removeClass('disabled').removeAttr('disabled');\r\n                        });\r\n                    }\r\n                })\r\n                .fail(err => {\r\n                    this.flag.valCode = false;\r\n                });\r\n        });\r\n    }\r\n    \r\n    submitUp() {\r\n        this.$submitUp.on('click', e => {\r\n            if (this.flag.email && this.flag.name && this.flag.pswd && this.flag.enPswd && this.flag.valCode) {\r\n                console.log(1);\r\n                this.$formUp.submit();\r\n            } else {\r\n                console.log(0);\r\n            }\r\n        });\r\n    }\r\n\r\n    dealEmailCountingDown(jqObj, beginCB, endCB) {\r\n        jqObj = (jqObj instanceof $) ? jqObj : $(jqObj);\r\n        if (beginCB && beginCB instanceof Function) {\r\n            beginCB(jqObj);\r\n        }\r\n        this.countingDown(jqObj, 60, endCB)();\r\n    }\r\n\r\n    countingDown(obj, count, callback) {\r\n        const self = this;\r\n        return function() {\r\n            count -= 1;\r\n            $(obj).text(count + '秒后重新获取验证码');\r\n            var timer = null;\r\n            if (count !== 0) {\r\n                timer = setTimeout(self.countingDown($(obj), count, callback), 1000);\r\n            } else {\r\n                clearTimeout(timer);\r\n                $(obj).text('获取邮箱验证码');\r\n                if (callback && callback instanceof Function) {\r\n                    callback(obj);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    fadeIn(content) {\r\n        this.$logIn.text(content).fadeIn('fast').fadeOut(2000);\r\n    }\r\n\r\n    fadeUp(content) {\r\n        this.$logUp.text(content).fadeIn('fast').fadeOut(2000);\r\n    }\r\n\r\n    check(type, value) {\r\n        let result = '';\r\n        switch (type) {\r\n            case 'email':\r\n                result = value.split(/\\s*, \\s*/g).every((item) => {\r\n                    return this.regx.email.test(item);\r\n                });\r\n                break;\r\n            case 'name':\r\n                result = !!value.length;\r\n                break;\r\n            case 'pswd':\r\n                result = value.length >= 6 && value.length <= 16 ? true : false;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        console.log(result);\r\n        return result;\r\n    }\r\n}\r\n\r\n$(document).ready(function() {\r\n    const login = new Login();\r\n    login.init();\r\n});"],"sourceRoot":""}