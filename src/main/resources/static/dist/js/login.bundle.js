!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=4)}({4:function(t,e){$(document).ready(function(){(new class{constructor(){this.regx={email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pswd:/^[a-zA-Z0-9!@#$%^&*]{6,16}$/},this.$formIn=$("formIn"),this.$emailIn=$("emailIn"),this.$pswdIn=$("pswdIn"),this.$submitIn=$("#submitIn"),this.$logIn=$("#loginIn"),this.$formUp=$("formUp"),this.$emailUp=$("#emailUp"),this.$nameUp=$("#nameUp"),this.$pswdUp=$("#pswdUp"),this.$enPswdUp=$("#enPwsdUp"),this.$valCode=$("#valCode"),this.$getValCodeBtn=$("#sendValCode"),this.$submitUp=$("#submitUp"),this.$logUp=$("#logUp"),this.flag={email:!1,name:!1,pswd:!1,enPswd:!1,valCode:!1}}init(){this.submitIn(),this.checkEmailUp(),this.checkNameUp(),this.checkPswdUp(),this.checkEnPswdUp(),this.getValCode(),this.submitUp()}checkEmailIn(){this.$emailIn.on("blur",t=>{const e=this.$emailIn.val();let s;e&&((s=this.check("email",e))?$.get("/api/isExist").then(t=>{const e=(t=JSON.parse(t)).data;t.ret&&e?!1===e.isExist&&(this.fadeIn("邮箱未被注册"),this.flag.email=!1):this.flag.email=!0}).fail(t=>{console.error(t)}):(this.fadeIn("邮箱格式不正确"),this.flag.email=!1))})}checkPswdIn(){this.$pswdIn.on("blur",t=>{const e=this.$pswdIn.val();let s;e&&((s=this.check("pswd",e))?this.flag.pswd=!0:(this.fadeIn("密码不符合要求"),this.flag.pswd=!1))})}submitIn(){this.$submitIn.on("click",t=>{this.$formIn.submit()})}checkEmailUp(){this.$emailUp.on("blur",t=>{const e=this.$emailUp.val();let s;e&&((s=this.check("email",e))?$.get("/api/isExsit").then(t=>{const e=(t=JSON.parse(t)).data;t.ret&&e?!0===e.isExsit&&(this.fadeUp("邮箱已被注册"),this.flag.email=!1):this.flag.email=!0}).fail(t=>{console.error(t)}):(this.fadeUp("邮箱格式不正确"),this.flag.email=!1))})}checkNameUp(){this.$nameUp.on("blur",t=>{const e=this.$nameUp.val();let s;e&&((s=this.check("name",e))?this.flag.name=!0:(this.fadeUp("姓名不符合要求"),this.flag.name=!1))})}checkPswdUp(){this.$pswdUp.on("blur",t=>{const e=this.$pswdUp.val();let s;e&&((s=this.check("pswd",e))?this.flag.pswd=!0:(this.fadeUp("密码不符合要求"),this.flag.pswd=!1))})}checkEnPswdUp(){this.$enPswdUp.on("blur",t=>{const e=this.$enPswdUp.val();this.$pswdUp.val()!==e?(this.fadeUp("两次密码不一致"),this.flag.enPswd=!1):this.flag.enPswd=!0})}getValCode(){this.$getValCodeBtn.on("click",t=>{t.preventDefault(),$.get("/api/getValCode").then(t=>{const e=(t=JSON.parse(t)).data;t.ret&&e&&(this.$valCode.on("blur",t=>{this.$valCode.val()!==e.valCode?(this.fadeUp("验证码不正确"),this.flag.valCode=!1):this.flag.valCode=!0}),this.dealEmailCountingDown(this.$getValCodeBtn,function(t){t.addClass("disabled").attr("disabled","true")},function(t){t.removeClass("disabled").removeAttr("disabled")}))}).fail(t=>{this.flag.valCode=!1})})}submitUp(){this.$submitUp.on("click",t=>{this.flag.email&&this.flag.name&&this.flag.pswd&&this.flag.enPswd&&this.flag.valCode?(console.log(1),this.$formUp.submit()):console.log(0)})}dealEmailCountingDown(t,e,s){t=t instanceof $?t:$(t),e&&e instanceof Function&&e(t),this.countingDown(t,60,s)()}countingDown(t,e,s){const i=this;return function(){e-=1,$(t).text(e+"秒后重新获取验证码");var a=null;0!==e?a=setTimeout(i.countingDown($(t),e,s),1e3):(clearTimeout(a),$(t).text("获取邮箱验证码"),s&&s instanceof Function&&s(t))}}fadeIn(t){this.$logIn.text(t).fadeIn("fast").fadeOut(2e3)}fadeUp(t){this.$logUp.text(t).fadeIn("fast").fadeOut(2e3)}check(t,e){let s="";switch(t){case"email":s=e.split(/\s*, \s*/g).every(t=>this.regx.email.test(t));break;case"name":s=!!e.length;break;case"pswd":s=e.length>=6&&e.length<=16}return console.log(s),s}}).init()})}});
//# sourceMappingURL=login.bundle.js.map